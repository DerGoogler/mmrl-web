"use strict";(self.webpackChunkcom_dergoogler_mmrl_web=self.webpackChunkcom_dergoogler_mmrl_web||[]).push([[211],{950211:(e,r,o)=>{o.r(r),o.d(r,{default:()=>J});var s=o(474848),n=o(599682),t=o(971543),a=o(727465),i=o(68463),l=o(877037),c=o(346831),d=o(30799),u=o(737303),p=o(301043),m=o(437071),h=o(851629),x=o(83864),j=o(296540),g=o(993328),b=o(719907),k=o(692659),f=o(213803),A=o(296857),v=o(676437),y=o(19455),_=o(616718),w=o(303959),C=o(482241);const R=e=>{const{actions:r}=(0,x.V6)();return(0,s.jsx)(w.Ay,{secondaryAction:(0,s.jsx)(y.A,{edge:"end","aria-label":"add",onClick:()=>{r.addRepo({url:e.link,callback:e=>{},error:e=>{f.os.toast(e.message,"short")}})},children:(0,s.jsx)(_.A,{})}),children:(0,s.jsx)(C.A,{primary:e.name,secondary:e.link})})};var E=o(331656),M=o(972048),L=o(29375),S=o(237211),T=o(857873),F=o(233551),z=o(172205),P=o(737010),V=o(152441),D=o(853252),W=o(955769),B=o(292997),Y=o(616058),$=o(448043),I=o(67034),N=o(211917);const O=j.memo((e=>e.part?(0,s.jsxs)(S.A,{onClick:e.onClick,children:[(0,s.jsx)(T.A,{children:(0,s.jsx)(e.icon,{})}),(0,s.jsx)(C.A,{primary:e.text})]}):null)),G=j.memo((e=>{const{repo:r}=e,{strings:o}=(0,A.k)(),n=(0,$.SC)(),{actions:t}=(0,x.V6)(),[i,l]=j.useState(t.isRepoEnabled(r.base_url)),[c,d]=j.useState(!1),[u]=(0,N.s)(`${r.base_url}json/modules.json`),p=(0,Y.l)(u?u.metadata.timestamp:0),m=()=>{n({title:"Delete?",confirmationText:"Sure",description:o("confirm_repo_delete",{name:r.name})}).then((()=>{t.removeRepo({id:r.base_url})}))};if(!u)return(0,s.jsx)(w.Ay,{secondaryAction:(0,s.jsx)(y.A,{onClick:m,edge:"end","aria-label":"delete",children:(0,s.jsx)(I.A,{})}),children:(0,s.jsx)(C.A,{primary:"Loading..."})});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(w.Ay,{children:[(0,s.jsx)(T.A,{onClick:()=>{d(!c)},children:c?(0,s.jsx)(E.A,{}):(0,s.jsx)(M.A,{})}),(0,s.jsx)(C.A,{primary:r.name,secondary:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(F.A,{variant:"body2",children:p}),(0,s.jsxs)(F.A,{variant:"body2",sx:{},children:["Holds"," ",(0,s.jsx)(F.A,{component:"span",variant:"body2",sx:{background:"-webkit-linear-gradient(132deg, rgba(188,2,194,1) 10%,rgba(255,255,255,1) 100%, rgba(74,20,140,0.5) 50%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:u.modules.length.toString()})," ","modules"]})]})}),(0,s.jsx)(z.A,{edge:"end",onChange:(e,o)=>{t.setRepoEnabled({id:r.base_url,callback(e){l(!e.some((e=>e===r.base_url)))}})},checked:i})]}),(0,s.jsx)(L.A,{in:c,timeout:"auto",unmountOnExit:!0,children:(0,s.jsxs)(a.A,{component:"div",disablePadding:!0,children:[(0,s.jsx)(O,{part:r.website,icon:P.A,text:o("website"),onClick:()=>{r.website&&f.os.open(r.website)}}),(0,s.jsx)(O,{part:r.support,icon:V.A,text:o("support"),onClick:()=>{r.support&&f.os.open(r.support)}}),(0,s.jsx)(O,{part:r.donate,icon:D.A,text:o("donate"),onClick:()=>{r.donate&&f.os.open(r.donate)}}),(0,s.jsx)(O,{part:r.submission,icon:W.A,text:o("submit_module"),onClick:()=>{r.submission&&f.os.open(r.submission)}}),(0,s.jsx)(O,{part:!0,icon:B.A,text:o("remove"),onClick:m})]})})]})}));var H=o(718867);const U=[{name:"Magisk Modules Alternative Repository",link:"https://magisk-modules-alt-repo.github.io/json-v2/"},{name:"Googlers Magisk Repo",link:"https://gr.dergoogler.com/gmr/"},{name:"IzzyOnDroid Magisk Repository",link:"https://apt.izzysoft.de/magisk/"}],q=j.memo((e=>{const{strings:r}=(0,A.k)(),{repos:o}=(0,x.V6)();return(0,s.jsxs)(s.Fragment,{children:[0!==o.length&&(0,s.jsx)(t.A,{}),(0,s.jsx)(a.A,{subheader:(0,s.jsx)(i.A,{sx:e=>({bgcolor:e.palette.background.default}),children:r("explore_repositories")}),children:U.map(((e,r)=>(0,s.jsx)(R,{name:e.name,link:e.link},e.name+"_"+r)))})]})})),J=()=>{const{isNetworkAvailable:e}=(0,H.A)(),{context:r}=(0,g.v5)(),{strings:o}=(0,A.k)(),{repos:t,actions:i}=(0,x.V6)(),[y,_]=j.useState(""),[w,C]=j.useState(!1),R=()=>{e?C(!0):f.os.toast("Please chack your internet connection","short")},E=()=>{C(!1)};return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(v.Y,{renderToolbar:()=>(0,s.jsxs)(b.M,{modifier:"noshadow",children:[(0,s.jsx)(b.M.Left,{children:(0,s.jsx)(b.M.Button,{icon:k.A,onClick:r.popPage})}),(0,s.jsx)(b.M.Center,{children:o("repositories")}),(0,s.jsx)(b.M.Right,{children:(0,s.jsx)(b.M.Button,{icon:n.A,onClick:R})})]}),children:[(0,s.jsxs)(v.Y.RelativeContent,{zeroMargin:!0,children:[(0,s.jsx)(a.A,{sx:{bgcolor:"transparent"},children:t.map(((e,r)=>(0,s.jsx)(G,{repo:e},"repo_"+e.name+"_"+r)))}),e&&(0,s.jsx)(q,{})]}),(0,s.jsxs)(l.A,{open:w,onClose:E,children:[(0,s.jsx)(c.A,{children:o("add_repository")}),(0,s.jsxs)(d.A,{children:[(0,s.jsx)(u.A,{children:o("add_repository_description")}),(0,s.jsx)(p.A,{autoFocus:!0,name:"repo_link",fullWidth:!0,margin:"dense",type:"text",label:"Modules link",value:y,variant:"outlined",onChange:e=>{_(e.target.value)}})]}),(0,s.jsxs)(m.A,{children:[(0,s.jsx)(h.A,{onClick:E,children:o("cancel")}),(0,s.jsx)(h.A,{onClick:()=>{i.addRepo({url:y,callback:e=>{_(""),E()},error:e=>{_(""),f.os.toast(e.message,"short"),E()}})},children:o("add")})]})]})]})})}},211917:(e,r,o)=>{o.d(r,{s:()=>n});var s=o(296540);function n(e,r){const o=(0,s.useRef)({}),n=(0,s.useRef)(!1),t={error:void 0,data:void 0},[a,i]=(0,s.useReducer)(((e,r)=>{switch(r.type){case"loading":return{...t};case"fetched":return{...t,data:r.payload};case"error":return{...t,error:r.payload};default:return e}}),t);return(0,s.useEffect)((()=>{if(!e)return;n.current=!1;return(async()=>{if(i({type:"loading"}),o.current[e])i({type:"fetched",payload:o.current[e]});else try{const s=await fetch(e,r);if(!s.ok)throw new Error(s.statusText);let t=await s[r?.type||"json"]();if(o.current[e]=t,n.current)return;i({type:"fetched",payload:t})}catch(e){if(n.current)return;i({type:"error",payload:e})}})(),()=>{n.current=!0}}),[e]),[a.data,a.error]}},616058:(e,r,o)=>{o.d(r,{l:()=>t});var s=o(296540),n=o(513272);const t=(e,r=!0)=>{const[o]=(0,n.t)("language");return(0,s.useMemo)((()=>Intl.DateTimeFormat(o.value,{year:"numeric",day:"2-digit",month:"short",hour12:!0}).format(new Date(r?1e3*e:e))),[e])}},718867:(e,r,o)=>{o.d(r,{A:()=>n});var s=o(296540);const n=()=>{const[e,r]=s.useState(window.navigator.onLine),o=()=>{r(window.navigator.onLine)};return s.useEffect((()=>(window.addEventListener("offline",o),window.addEventListener("online",o),()=>{window.removeEventListener("offline",o),window.removeEventListener("online",o)})),[e]),{isNetworkAvailable:e}}},83864:(e,r,o)=>{o.d(r,{V6:()=>u,W6:()=>d});var s=o(474848),n=o(296540),t=o(152636),a=o(513272),i=o(213803),l=o(158749);const c=n.createContext({repos:[],setRepos:()=>{},modules:[],actions:{addRepo:e=>{},removeRepo:e=>{},setRepoEnabled:e=>{},isRepoEnabled:e=>!1}}),d=e=>{const r=(0,l.e)("RepoProvider"),[o,d]=(0,a.t)("disabled_repos"),[u,p]=(0,a.t)("repos"),[m,h]=n.useState([]),x=e=>{u.some((r=>r.base_url===e.url))?i.os.toast("This repo already exists","short"):u.length<=4?t.link.validURL(e.url)?fetch(`${"/"!=e.url.slice(-1)?e.url+"/":e.url}json/config.json`).then((r=>{if(200==r.status)return r.json();e.error&&e.error(Error("Cannot find given repo link or your link isn't valid"))})).then((r=>{p((e=>[...e,r]),e.callback)})).catch((o=>e.callback?e.callback(o):r.e(o))):i.os.toast("The given link isn't valid","short"):i.os.toast("You can't add more than 5 repos","short")},j=e=>{p((r=>r=r.filter((r=>r.base_url!=e.id))),e.callback)},g=e=>{d((r=>r.some((r=>r===e.id))?r.filter((r=>r!==e.id)):[...r,e.id]),e.callback)},b=n.useCallback((e=>!o.includes(e)),[o]);n.useEffect((()=>{h([]);(async()=>{const e=new Map;for(const s of u)if(!o.includes(s.base_url))try{const r=await fetch(`${"/"!==s.base_url.slice(-1)?s.base_url+"/":s.base_url}json/modules.json`);if(!r.ok)throw new Error(r.statusText);(await r.json()).modules.forEach((r=>{if(e.has(r.id)){const o=e.get(r.id);o.__mmrl_repo_source.includes(s.name)||o.__mmrl_repo_source.push(s.name)}else e.set(r.id,{...r,__mmrl_repo_source:[s.name]})}))}catch(e){r.e(e.message)}h(Array.from(e.values()))})()}),[o,u]);const k=n.useMemo((()=>({repos:u,setRepos:p,modules:m,actions:{addRepo:x,removeRepo:j,setRepoEnabled:g,isRepoEnabled:b}})),[u,m]);return(0,s.jsx)(c.Provider,{value:k,children:e.children})},u=()=>n.useContext(c)}}]);
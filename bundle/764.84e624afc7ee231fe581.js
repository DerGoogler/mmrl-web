"use strict";(self.webpackChunkcom_dergoogler_mmrl_web=self.webpackChunkcom_dergoogler_mmrl_web||[]).push([[764,306],{16764:(e,r,t)=>{t.r(r),t.d(r,{default:()=>l});var o=t(74848),i=t(93328),n=t(96540),s=t(64483),a=t(6714),d=t(40306);const l=()=>{const{extra:e}=(0,i.v5)(),r=n.useMemo((()=>{const r=new s.j(e.indexFile);return r.exist()?r.read():'import {Page} from "@mmrl/ui";export default () => <Page>Config file not found</Page>'}),[]);return(0,o.jsx)(d.PreviewErrorBoundary,{children:(0,o.jsx)(a.o,{cwd:e.cwd,indexFile:e.indexFile,modid:e.modId,children:r})})}},40306:(e,r,t)=>{t.r(r),t.d(r,{PreviewErrorBoundary:()=>y,default:()=>D});var o=t(74848),i=t(30995),n=t(84719),s=t(11848),a=t(96540),d=t(15327),l=t(19907),c=t(76437),u=t(93328),h=t(50981),m=t(58807),p=t(46806),g=t(13420),x=t(6714),f=t(96857),b=t(11041),C=t(38206),j=t(76694),w=t(58418);const v=e=>({backgroundColor:e.palette.background.paper,color:e.palette.text.primary,borderRadius:e.shape.borderRadius/e.shape.borderRadius,lineHeight:1.45,overflow:"auto",padding:2});class y extends a.Component{constructor(e){super(e),this.state=p.g}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){this.setState({error:e,errorInfo:r})}render(){return this.state.hasError?(0,o.jsxs)(c.Y,{sx:{p:1},renderToolbar:()=>(0,o.jsx)(l.M,{modifier:"noshadow",children:(0,o.jsx)(l.M.Center,{children:"Complile error"})}),children:[(0,o.jsx)(j.A,{sx:v,children:(0,o.jsx)(w.C,{children:this.state.error.message})}),(0,o.jsx)(j.A,{sx:v,children:(0,o.jsx)(w.C,{children:this.state.errorInfo.componentStack})})]}):this.props.children}}const M=(e,r)=>[{label:"native",kind:e.languages.CompletionItemKind.Function,documentation:"",insertText:"native",range:r},{label:"ignore",kind:e.languages.CompletionItemKind.Function,documentation:"",insertText:"// @ts-ignore",range:r}],O=(e,r)=>{r.editor.defineTheme("editorTheme",g.A),r.editor.setTheme("editorTheme"),r.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSemanticValidation:!0,noSyntaxValidation:!0}),r.languages.typescript.javascriptDefaults.setCompilerOptions({jsx:r.languages.typescript.JsxEmit.React,jsxFactory:"React.createElement",reactNamespace:"React",allowNonTsExtensions:!0,allowJs:!0,target:r.languages.typescript.ScriptTarget.ES2015}),r.languages.registerCompletionItemProvider("javascript",{provideCompletionItems:(e,t)=>{const o=e.getWordUntilPosition(t),i={startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:o.startColumn,endColumn:o.endColumn};return{suggestions:M(r,i)}}}),e.focus()},R=(0,s.Ay)("div")((({theme:e})=>({flex:1,flexBasis:"50%",height:"100%",width:"100%",minHeight:"100%",position:"relative",borderRadius:e.shape.borderRadius,borderStyle:"solid",borderWidth:"1px",minWidth:"0%",overflow:"auto",borderColor:e.palette.divider,section:{position:"absolute",overflowY:"scroll"},".monaco-editor":{borderRadius:e.shape.borderRadius/e.shape.borderRadius},".overflow-guard":{borderRadius:e.shape.borderRadius/e.shape.borderRadius}}))),D=()=>{const{context:e,extra:r}=(0,u.v5)(),{strings:t}=(0,f.k)(),{modFS:s}=(0,C.vQ)(),[p,g]=(0,b.CB)(s("MODCONF_PLAYGROUND"),r.defaultText||""),[j,w]=a.useState(0),v=(0,d.A)("(min-width:600px)"),M=()=>{e.pushPage({component:x.o,noMemo:!0,key:r.title,extra:{modulename:"Preview"},props:{cwd:s("MMRLFOL"),indexFile:s("MODCONF_PLAYGROUND"),modid:s("MODCONF_PLAYGROUND_MODID"),children:p}})};return(0,o.jsx)(c.Y,{renderToolbar:()=>(0,o.jsxs)(l.M,{modifier:"noshadow",children:[(0,o.jsx)(l.M.Left,{children:(0,o.jsx)(l.M.BackButton,{onClick:e.popPage})}),(0,o.jsx)(l.M.Center,{children:t("modconf_playground")}),(0,o.jsx)(l.M.Right,{children:(0,o.jsx)(l.M.Button,{icon:h.A,onClick:M})})]}),children:(0,o.jsx)("section",{style:{padding:8,height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:(0,o.jsx)("span",{style:{flex:1,display:"flex",marginTop:4},children:(0,o.jsxs)(i.A,{style:{height:"100%",width:"100%"},direction:"row",justifyContent:"center",alignItems:"center",spacing:1,children:[(0,o.jsx)(R,{sx:{border:"unset"},children:(0,o.jsx)(m.Ay,{height:"100%",width:"100%",language:r.editorMode,value:p,onChange:e=>{e&&(w((e=>e+1)),g(e))},onMount:O,options:{autoIndent:"full",contextmenu:!0,fontFamily:"monospace",fontSize:13,lineHeight:24,hideCursorInOverviewRuler:!0,matchBrackets:"always",minimap:{enabled:!1},scrollbar:{horizontalSliderSize:4,verticalSliderSize:18},selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0}})}),v&&(0,o.jsx)(R,{children:(0,o.jsx)(n.A,{id:"ModConf-Container",component:"section",sx:{position:"relative",width:"100%",height:"100%"},children:(0,o.jsx)(y,{children:(0,o.jsx)(x.o,{cwd:s("MMRLFOL"),indexFile:s("MODCONF_PLAYGROUND"),modid:s("MODCONF_PLAYGROUND_MODID"),children:p})},"preview_error_bound_key_"+j)})})]})})})})}}}]);